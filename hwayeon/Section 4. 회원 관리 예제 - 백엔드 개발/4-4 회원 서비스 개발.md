# 4-4 íšŒì› ì„œë¹„ìŠ¤ ê°œë°œ

## íšŒì› ë¦¬í¬ì§€í† ë¦¬ì™€ ë„ë©”ì¸ì„ í™œìš©í•˜ì—¬ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‘ì„±

### service íŒ¨í‚¤ì§€, MemberService í´ë˜ìŠ¤ ìƒì„±

- main/java/hello.hello-spring/service/MemberService

```java
package hello.hello_spring.service;

import hello.hello_spring.domain.Member;
import hello.hello_spring.repository.MemberRepository;
import hello.hello_spring.repository.MemoryMemberRepository;

import java.util.List;
import java.util.Optional;

public class MemberService {
    private final MemberRepository memberRepository = new MemoryMemberRepository();

    // íšŒì› ê°€ì…
    public Long join(Member member) {
        validateDuplicateMember(member); // ì¤‘ë³µ íšŒì› ê²€ì¦
        memberRepository.save(member);
        return member.getId();
    }

    // ì¤‘ë³µ íšŒì› ê²€ì¦ í•¨ìˆ˜
    private void validateDuplicateMember(Member member) {
        memberRepository.findByName(member.getName())
                .ifPresent(m -> { // ë§Œì•½ ê°’ì´ ìˆë‹¤ë©´, Optionalì´ê¸° ë•Œë¬¸ì— ê°€ëŠ¥
                    throw new IllegalStateException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
                });
    }

    // ì „ì²´ íšŒì› ì¡°íšŒ
    public List<Member> findMembers() {
        return memberRepository.findAll();
    }

    public Optional<Member> findOne(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

- repositoryëŠ” save, findById ë“± ë‹¨ìˆœ ê¸°ê³„ì  ìš©ì–´
- service classëŠ” join, findMembers ë“± ë¹„ì¦ˆë‹ˆìŠ¤ì— ê°€ê¹Œìš´ ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨ â†’ ê°œë°œì, ê¸°íšì ë“± ë¡œì§ ì°¾ì„ ë•Œ

<aside>
ğŸ’¡

ìë™ return ë³€ìˆ˜ ìƒì„± ë‹¨ì¶•í‚¤ - Ctrl + Alt + V

</aside>

<aside>
ğŸ’¡

í•¨ìˆ˜ ìƒì„± ë‹¨ì¶•í‚¤ - Ctrl + Alt + M

</aside>